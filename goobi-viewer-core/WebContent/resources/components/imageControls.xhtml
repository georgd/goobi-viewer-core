<ui:composition
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://xmlns.jcp.org/jsf/core"
    xmlns:h="http://xmlns.jcp.org/jsf/html"
    xmlns:p="http://primefaces.org/ui"
    xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
    xmlns:composite="http://xmlns.jcp.org/jsf/composite">
    <!-- INTERFACE -->
    <composite:interface />
    <!-- IMPLEMENTATION -->
    <composite:implementation>
        <nav class="image-controls">
            <!--  TOGGLE MOBILE IMAGE CONTROLS -->
            <button type="button" class="btn-clean" data-toggle="mobile-image-controls">
                <i class="fa fa-bars" aria-hidden="true"></i>
            </button>
            <!-- FORM -->
            <h:form
                id="imageControlsForm"
                prependId="false">
                <!-- ACTIONS -->
                <div class="image-controls__actions clearfix">
                    <ul class="list list--horizontal list--center">
                        <!-- START -->
                        <h:panelGroup rendered="#{activeDocumentBean.viewManager.multiPageRecord}">
                            <ui:fragment
                                rendered="#{!(navigationHelper.currentPage == 'fulltext' and activeDocumentBean.viewManager.belowFulltextThreshold)}">
                                <li class="image-control image-control__start #{activeDocumentBean.imageToShow == 1 ? 'inactive' : ''}">
                                    <h:outputLink
                                        value="#{activeDocumentBean.firstPageUrl}"
                                        title="#{msg.firstImage}"
                                        disabled="#{activeDocumentBean.imageToShow == 1 ? 'true' : 'false'}">
                                        <i class="image-start"></i>
                                        <span class="labeltext">#{msg.firstImage}</span>
                                        <f:passThroughAttribute
                                            name="data-toggle"
                                            value="tooltip" />
                                        <f:passThroughAttribute
                                            name="data-placement"
                                            value="bottom" />
                                    </h:outputLink>
                                </li>
                            </ui:fragment>
                            <!-- PAGE BROWSE BACK -->
                            <h:panelGroup
                                rendered="#{configurationBean.pageBrowseEnabled and navigationHelper.currentPage != 'fulltext' and activeDocumentBean.viewManager.multiPageRecord}">
                                <h:panelGroup rendered="#{configurationBean.pageBrowseStep3Visible}">
                                    <li
                                        class="image-control image-control__page-browse #{activeDocumentBean.imageToShow lt (configurationBean.pageBrowseStep3 + 1) ? 'inactive' : ''}">
                                        <h:outputLink
                                            value="#{activeDocumentBean.getPreviousPageUrl(configurationBean.pageBrowseStep3)}"
                                            title="#{configurationBean.pageBrowseStep3} #{msg.stepBack}"
                                            disabled="#{activeDocumentBean.imageToShow lt (configurationBean.pageBrowseStep3 + 1) ? 'true' : 'false'}">
    	                                -#{configurationBean.pageBrowseStep3}
    	                                <f:passThroughAttribute
                                                name="data-toggle"
                                                value="tooltip" />
                                            <f:passThroughAttribute
                                                name="data-placement"
                                                value="bottom" />
                                        </h:outputLink>
                                    </li>
                                </h:panelGroup>
                                <h:panelGroup rendered="#{configurationBean.pageBrowseStep2Visible}">
                                    <li
                                        class="image-control image-control__page-browse #{activeDocumentBean.imageToShow lt (configurationBean.pageBrowseStep2 + 1) ? 'inactive' : ''}">
                                        <h:outputLink
                                            value="#{activeDocumentBean.getPreviousPageUrl(configurationBean.pageBrowseStep2)}"
                                            title="#{configurationBean.pageBrowseStep2} #{msg.stepBack}"
                                            disabled="#{activeDocumentBean.imageToShow lt (configurationBean.pageBrowseStep2 + 1) ? 'true' : 'false'}">
    	                                -#{configurationBean.pageBrowseStep2}
    	                                <f:passThroughAttribute
                                                name="data-toggle"
                                                value="tooltip" />
                                            <f:passThroughAttribute
                                                name="data-placement"
                                                value="bottom" />
                                        </h:outputLink>
                                    </li>
                                </h:panelGroup>
                                <h:panelGroup rendered="#{configurationBean.pageBrowseStep1Visible}">
                                    <li
                                        class="image-control image-control__page-browse #{activeDocumentBean.imageToShow lt (configurationBean.pageBrowseStep1 + 1) ? 'inactive' : ''}">
                                        <h:outputLink
                                            value="#{activeDocumentBean.getPreviousPageUrl(configurationBean.pageBrowseStep1)}"
                                            title="#{configurationBean.pageBrowseStep2} #{msg.stepBack}"
                                            disabled="#{activeDocumentBean.imageToShow lt (configurationBean.pageBrowseStep1 + 1) ? 'true' : 'false'}">
    	                                -#{configurationBean.pageBrowseStep1}
    	                                <f:passThroughAttribute
                                                name="data-toggle"
                                                value="tooltip" />
                                            <f:passThroughAttribute
                                                name="data-placement"
                                                value="bottom" />
                                        </h:outputLink>
                                    </li>
                                </h:panelGroup>
                            </h:panelGroup>
                            <!-- BACK -->
                            <ui:fragment
                                rendered="#{!(navigationHelper.currentPage == 'fulltext' and activeDocumentBean.viewManager.belowFulltextThreshold)}">
                                <li class="image-control image-control__back #{activeDocumentBean.imageToShow == 1 ? 'inactive' : ''}">
                                    <h:outputLink
                                        value="#{activeDocumentBean.getPreviousPageUrl(1 )}"
                                        title="#{msg.prevImage}"
                                        disabled="#{activeDocumentBean.imageToShow == 1 ? 'true' : 'false'}">
                                        <i class="image-back"></i>
                                        <span class="labeltext">#{msg.prevImage}</span>
                                        <f:passThroughAttribute
                                            name="data-toggle"
                                            value="tooltip" />
                                        <f:passThroughAttribute
                                            name="data-placement"
                                            value="bottom" />
                                    </h:outputLink>
                                </li>
                            </ui:fragment>
                            <ui:fragment
                                rendered="#{navigationHelper.currentPage == 'fulltext' and activeDocumentBean.viewManager.belowFulltextThreshold}">
                                <li class="image-control image-control__select-text">
                                    <span>#{msg.pageSelectDropdown}</span>
                                </li>
                            </ui:fragment>
                            <!-- SELECT -->
                            <li class="image-control image-control__select">
                                <div class="form-control__select">
                                    <!-- Image view select -->
                                    <h:selectOneMenu
                                        rendered="#{navigationHelper.currentPage != 'fulltext'}"
                                        onchange="location.href='#{activeDocumentBean.getPageUrl(navigationHelper.currentView)}' + $(this).val(); + '/';"
                                        value="#{activeDocumentBean.viewManager.dropdownSelected}"
                                        styleClass="form-control">
                                        <f:selectItems value="#{activeDocumentBean.viewManager.dropdownPages}" />
                                    </h:selectOneMenu>
                                    <!-- Full-text view select -->
                                    <h:selectOneMenu
                                        rendered="#{navigationHelper.currentPage == 'fulltext'}"
                                        onchange="location.href='#{activeDocumentBean.getPageUrl(navigationHelper.currentView)}' + $(this).val(); + '/';"
                                        value="#{activeDocumentBean.viewManager.dropdownSelected}"
                                        styleClass="form-control">
                                        <f:selectItems value="#{activeDocumentBean.viewManager.dropdownFulltext}" />
                                    </h:selectOneMenu>
                                </div>
                            </li>
                            <!-- FORWARD -->
                            <ui:fragment
                                rendered="#{!(navigationHelper.currentPage == 'fulltext' and activeDocumentBean.viewManager.belowFulltextThreshold)}">
                                <li
                                    class="image-control image-control__forward #{activeDocumentBean.imageToShow == activeDocumentBean.viewManager.imagesCount ? 'inactive' : ''}">
                                    <h:outputLink
                                        value="#{activeDocumentBean.getNextPageUrl(1 )}"
                                        title="#{msg.nextImage}"
                                        disabled="#{activeDocumentBean.imageToShow == activeDocumentBean.viewManager.imagesCount ? 'true' : 'false'}">
                                        <i class="image-forward"></i>
                                        <span class="labeltext">#{msg.nextImage}</span>
                                        <f:passThroughAttribute
                                            name="data-toggle"
                                            value="tooltip" />
                                        <f:passThroughAttribute
                                            name="data-placement"
                                            value="bottom" />
                                    </h:outputLink>
                                </li>
                            </ui:fragment>
                            <!-- PAGE BROWSE FORWARD -->
                            <h:panelGroup rendered="#{configurationBean.pageBrowseEnabled and navigationHelper.currentPage != 'fulltext'}">
                                <h:panelGroup rendered="#{configurationBean.pageBrowseStep1Visible}">
                                    <li
                                        class="image-control image-control__page-browse #{activeDocumentBean.imageToShow gt (activeDocumentBean.viewManager.imagesCount - configurationBean.pageBrowseStep1) ? 'inactive' : ''}">
                                        <h:outputLink
                                            value="#{activeDocumentBean.getNextPageUrl(configurationBean.pageBrowseStep1)}"
                                            title="#{configurationBean.pageBrowseStep1} #{msg.stepForward}"
                                            disabled="#{activeDocumentBean.imageToShow gt (activeDocumentBean.viewManager.imagesCount - configurationBean.pageBrowseStep1) ? 'true' : 'false'}">
    	                                +#{configurationBean.pageBrowseStep1}
    	                                <f:passThroughAttribute
                                                name="data-toggle"
                                                value="tooltip" />
                                            <f:passThroughAttribute
                                                name="data-placement"
                                                value="bottom" />
                                        </h:outputLink>
                                    </li>
                                </h:panelGroup>
                                <h:panelGroup rendered="#{configurationBean.pageBrowseStep2Visible}">
                                    <li
                                        class="image-control image-control__page-browse #{activeDocumentBean.imageToShow gt (activeDocumentBean.viewManager.imagesCount - configurationBean.pageBrowseStep2) ? 'inactive' : ''}">
                                        <h:outputLink
                                            value="#{activeDocumentBean.getNextPageUrl(configurationBean.pageBrowseStep2)}"
                                            title="#{configurationBean.pageBrowseStep2} #{msg.stepForward}"
                                            disabled="#{activeDocumentBean.imageToShow gt (activeDocumentBean.viewManager.imagesCount - configurationBean.pageBrowseStep2) ? 'true' : 'false'}">
    	                                +#{configurationBean.pageBrowseStep2}
    	                                <f:passThroughAttribute
                                                name="data-toggle"
                                                value="tooltip" />
                                            <f:passThroughAttribute
                                                name="data-placement"
                                                value="bottom" />
                                        </h:outputLink>
                                    </li>
                                </h:panelGroup>
                                <h:panelGroup rendered="#{configurationBean.pageBrowseStep3Visible}">
                                    <li
                                        class="image-control image-control__page-browse #{activeDocumentBean.imageToShow gt (activeDocumentBean.viewManager.imagesCount - configurationBean.pageBrowseStep3) ? 'inactive' : ''}">
                                        <h:outputLink
                                            value="#{activeDocumentBean.getNextPageUrl(configurationBean.pageBrowseStep3)}"
                                            title="#{configurationBean.pageBrowseStep3} #{msg.stepForward}"
                                            disabled="#{activeDocumentBean.imageToShow gt (activeDocumentBean.viewManager.imagesCount - configurationBean.pageBrowseStep3) ? 'true' : 'false'}">
    	                                +#{configurationBean.pageBrowseStep3}
    	                                <f:passThroughAttribute
                                                name="data-toggle"
                                                value="tooltip" />
                                            <f:passThroughAttribute
                                                name="data-placement"
                                                value="bottom" />
                                        </h:outputLink>
                                    </li>
                                </h:panelGroup>
                            </h:panelGroup>
                            <!-- END -->
                            <ui:fragment
                                rendered="#{!(navigationHelper.currentPage == 'fulltext' and activeDocumentBean.viewManager.belowFulltextThreshold)}">
                                <li
                                    class="image-control image-control__end #{activeDocumentBean.imageToShow == activeDocumentBean.viewManager.imagesCount ? 'inactive' : ''}">
                                    <h:outputLink
                                        value="#{activeDocumentBean.getLastPageUrl()}"
                                        title="#{msg.lastImage}"
                                        disabled="#{activeDocumentBean.imageToShow == activeDocumentBean.viewManager.imagesCount ? 'true' : 'false'}">
                                        <i class="image-end"></i>
                                        <span class="labeltext">#{msg.lastImage}</span>
                                        <f:passThroughAttribute
                                            name="data-toggle"
                                            value="tooltip" />
                                        <f:passThroughAttribute
                                            name="data-placement"
                                            value="bottom" />
                                    </h:outputLink>
                                </li>
                            </ui:fragment>
                            <!-- DOUBLEPAGEVIEW -->
                            <h:panelGroup
                                rendered="#{activeDocumentBean.numberOfImages gt 1 and !activeDocumentBean.viewManager.doublePageMode and navigationHelper.currentPage != 'fulltext' and configurationBean.doublePageModeEnabled}">
                                <li class="image-control image-control__double-page-view">
                                    <h:commandLink
                                        action="#{activeDocumentBean.viewManager.setDoublePageMode(true)}"
                                        title="#{msg.doublePageView}">
                                        <i class="image-doublePageView"></i>
                                        <span class="labeltext">#{msg.doublePageView}</span>
                                        <f:passThroughAttribute
                                            name="data-toggle"
                                            value="tooltip" />
                                        <f:passThroughAttribute
                                            name="data-placement"
                                            value="bottom" />
                                    </h:commandLink>
                                </li>
                            </h:panelGroup>
                            <h:panelGroup rendered="#{activeDocumentBean.viewManager.doublePageMode and navigationHelper.currentPage != 'fulltext'}">
                                <li class="image-control image-control__single-page-view">
                                    <h:commandLink
                                        action="#{activeDocumentBean.viewManager.setDoublePageMode(false)}"
                                        title="#{msg.singlePageView}">
                                        <i class="image-singlePageView"></i>
                                        <span class="labeltext">#{msg.singlePageView}</span>
                                        <f:passThroughAttribute
                                            name="data-toggle"
                                            value="tooltip" />
                                        <f:passThroughAttribute
                                            name="data-placement"
                                            value="bottom" />
                                    </h:commandLink>
                                </li>
                                <li class="image-control image-control__switch-pages">
                                    <h:commandLink
                                        action="#{activeDocumentBean.viewManager.togglePageOrientation()}"
                                        title="#{msg.switchPages}">
                                        <i class="image-switchPages">
                                            <span class="path1"></span>
                                            <span class="path2"></span>
                                            <span class="path3"></span>
                                            <span class="path4"></span>
                                            <span class="path5"></span>
                                            <span class="path6"></span>
                                            <span class="path7"></span>
                                            <span class="path8"></span>
                                        </i>
                                        <span class="labeltext">#{msg.switchPages}</span>
                                        <f:passThroughAttribute
                                            name="data-toggle"
                                            value="tooltip" />
                                        <f:passThroughAttribute
                                            name="data-placement"
                                            value="bottom" />
                                    </h:commandLink>
                                </li>
                            </h:panelGroup>
                        </h:panelGroup>
                        <h:panelGroup rendered="#{navigationHelper.currentPage != 'fulltext'}">
                            <!-- ROTATE -->
                            <li class="image-control image-control__rotate-left">
                                <a
                                    data-toggle="tooltip"
                                    data-placement="bottom"
                                    title="#{msg.rotateLeft}"
                                    onclick="viewImage.controls.rotateLeft();">
                                    <i class="image-rotate_left"></i>
                                    <span class="labeltext">#{msg.rotateLeft}</span>
                                </a>
                            </li>
                            <li class="image-control image-control__rotate-right">
                                <a
                                    data-toggle="tooltip"
                                    data-placement="bottom"
                                    title="#{msg.rotateRight}"
                                    onclick="viewImage.controls.rotateRight();">
                                    <i class="image-rotate_right"></i>
                                    <span class="labeltext">#{msg.rotateRight}</span>
                                </a>
                            </li>
                            <!-- RESET -->
                            <li class="image-control image-control__reset">
                                <a
                                    data-toggle="tooltip"
                                    data-placement="bottom"
                                    title="#{msg.resetImage}"
                                    onclick="viewImage.controls.reset(true);">
                                    <i class="image-reset"></i>
                                    <span class="labeltext">#{msg.resetImage}</span>
                                </a>
                            </li>
                            <!-- FULLSCREEN -->
                            <ui:fragment rendered="#{navigationHelper.currentPage != 'readingmode'}">
                                <li class="image-control image-control__fullscreen">
                                    <h:outputLink
                                        value="#{activeDocumentBean.fullscreenImageUrl}"
                                        title="#{msg.enterFullscreen}">
                                        <i class="image-fullscreen"></i>
                                        <span class="labeltext">#{msg.enterFullscreen}</span>
                                        <f:passThroughAttribute
                                            name="data-toggle"
                                            value="tooltip" />
                                        <f:passThroughAttribute
                                            name="data-placement"
                                            value="bottom" />
                                    </h:outputLink>
                                </li>
                            </ui:fragment>
                            <!-- ZOMMSLIDER -->
                            <!-- TODO: rendered Anweisung, wenn pageBrowse in der config aktiv -->
                            <li class="image-control image-control__zoom-slider">
                                <div class="zoom-slider">
                                    <span class="zoom-slider-handle"></span>
                                </div>
                            </li>
                            <!-- PDF -->
                            <h:panelGroup rendered="#{!activeDocumentBean.viewManager.doublePageMode}">
                                <li class="image-control image-control__pdf">
                                    <h:outputLink
                                        value="#{activeDocumentBean.viewManager.pdfPageDownloadLink}"
                                        title="#{msg.pdfDownloadCurrentPage}"
                                        rendered="#{activeDocumentBean.viewManager.displayPagePdfLink}">
                                        <i
                                            class="fa fa-file-pdf-o"
                                            aria-hidden="true"></i>
                                        <span class="labeltext">#{msg.pdfDownloadCurrentPage}</span>
                                        <f:passThroughAttribute
                                            name="data-toggle"
                                            value="tooltip" />
                                        <f:passThroughAttribute
                                            name="data-placement"
                                            value="bottom" />
                                    </h:outputLink>
                                </li>
                            </h:panelGroup>
                            <!-- FULLTEXT -->
                            <ui:fragment
                                rendered="#{activeDocumentBean.viewManager.belowFulltextThreshold and activeDocumentBean.viewManager.currentPage.fulltextAvailable}">
                                <li class="image-control image-control__fulltext">
                                    <h:outputLink
                                        value="#{navigationHelper.fulltextActiveUrl}/#{activeDocumentBean.persistentIdentifier}/#{activeDocumentBean.imageToShow}/"
                                        title="#{msg.fulltext}">
                                        <i
                                            class="fa fa-file-text-o"
                                            aria-hidden="true"></i>
                                        <span class="labeltext">#{msg.fulltext}</span>
                                        <f:passThroughAttribute
                                            name="data-toggle"
                                            value="tooltip" />
                                        <f:passThroughAttribute
                                            name="data-placement"
                                            value="bottom" />
                                    </h:outputLink>
                                </li>
                            </ui:fragment>
                            <!-- ADD TO BOOKSHELF -->
                            <ui:fragment rendered="#{configurationBean.bookshelvesEnabled}">
                                <li class="image-control image-control__add-to-bookshelf">
                                    <button
                                        type="button"
                                        class="btn-clean"
                                        data-bookshelf-type="add"
                                        data-pi="#{activeDocumentBean.viewManager.pi}">
                                        <i class="fa #{msg.bookshelf_icon}" aria-hidden="true"></i>
                                        <i class="fa #{msg.bookshelf_iconAdded}" aria-hidden="true"></i>
                                    </button>
                                </li>
                            </ui:fragment>
                            <!-- IIIF -->
<!--                             <ui:fragment rendered="#{configurationBean.bookshelvesEnabled}"> -->
                                <li class="image-control image-control__iiif">
                                    <a href="#" title="#{msg.iiif}" data-toggle="tooltip" data-placement="bottom"></a>
                                </li>
<!--                             </ui:fragment> -->
                        </h:panelGroup>
                    </ul>
                </div>
            </h:form>
        </nav>
    </composite:implementation>
</ui:composition>
