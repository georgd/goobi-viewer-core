<ui:composition 
    xmlns="http://www.w3.org/1999/xhtml" 
    xmlns:ui="http://xmlns.jcp.org/jsf/facelets" 
    xmlns:c="http://java.sun.com/jsp/jstl/core"
    xmlns:h="http://xmlns.jcp.org/jsf/html" 
    xmlns:f="http://xmlns.jcp.org/jsf/core" 
    xmlns:jsf="http://xmlns.jcp.org/jsf" 
    xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
    xmlns:viewer="http://xmlns.jcp.org/jsf/composite/components/partner" 
    xmlns:viewerComponent="http://xmlns.jcp.org/jsf/composite/components"
    xmlns:widgetComponent="http://xmlns.jcp.org/jsf/composite/components/widgets">

    <!-- VIDEO CONTROLS -->
    <viewerComponent:imageControls />

    <!-- VIEW VIDEO -->
    <div style="text-align: center">
        <video 
            id="video_container" 
            width="#{activeDocumentBean.viewManager.currentPage.videoWidth}" 
            height="#{activeDocumentBean.viewManager.currentPage.videoHeight}"
            autoplay="autoplay" 
            controls="controls" 
            style="margin-left: auto; margin-right: auto; margin-top: 15px;">
            <source src="#{activeDocumentBean.viewManager.currentPage.getMediaUrl('webm')}" type="video/webm" />
            <source src="#{activeDocumentBean.viewManager.currentPage.getMediaUrl('mp4')}" type="video/mp4" />
            <source src="#{activeDocumentBean.viewManager.currentPage.getMediaUrl('ogg')}" type="video/ogg" />
            <object 
                width="#{activeDocumentBean.viewManager.currentPage.videoWidth}" 
                height="#{activeDocumentBean.viewManager.currentPage.videoHeight}"
                data="#{navigationHelper.applicationUrl}resources/components/flowplayer-3.2.7.swf" 
                type="application/x-shockwave-flash">
                <param name="movie" value="#{navigationHelper.applicationUrl}resources/components/flowplayer-3.2.7.swf" />
                <param name="allowfullscreen" value="true" />
                <param name="flashvars" value="config={'clip': {'url': '#{activeDocumentBean.viewManager.currentPage.getMediaUrl('x-flv')}', 'autoPlay':true, 'autoBuffering':true}}" />
                <embed 
                    type="application/x-shockwave-flash" 
                    src="#{navigationHelper.applicationUrl}resources/components/flowplayer-3.2.7.swf"
                    width="#{activeDocumentBean.viewManager.currentPage.videoWidth}" 
                    height="#{activeDocumentBean.viewManager.currentPage.videoHeight}" 
                    allowfullscreen="true"
                    play="true" 
                    flashvars="config={'clip': {'url': '#{activeDocumentBean.viewManager.currentPage.getMediaUrl('x-flv')}', 'autoPlay':true, 'autoBuffering':true}}"
                    pluginspage="http://www.macromedia.com/go/getflashplayer" />
            </object>
        </video>
    </div>

    <div class="clearfix"></div>

    <!--  Paginator -->
    <viewerComponent:simplePaginator 
        itemCount="#{activeDocumentBean.viewManager.imagesCount}" 
        itemActive="#{activeDocumentBean.viewManager.currentImageNoForPaginator}"
        urlPrefix="#{navigationHelper.imageUrl}/#{activeDocumentBean.persistentIdentifier}/" 
        urlSuffix="#topDocAnchor" />
</ui:composition>